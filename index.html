<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brave Feelings Lab: Interactive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tone@14.7.58/build/Tone.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Base Styling */
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            background-color: #f7fafc; /* light gray background */
        }
        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            max-width: 42rem; /* equivalent to max-w-xl in Tailwind */
            margin: auto;
            padding: 2rem;
        }
        .main-card {
            background-color: white;
            border-radius: 1.5rem; /* equivalent to rounded-3xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* equivalent to shadow-xl */
            padding: 2.5rem; /* equivalent to p-10 */
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="main-card text-center" id="main-content">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Loading Brave Feelings Lab...</h1>
        </div>
    </div>

    <script>
        // --- DATA STRUCTURES ---

        const FEELINGS_DATA = {
            'Sad': {
                tools: ['Talk to a grown-up', 'Take a deep breath', 'Go outside', 'Write it down'],
                color: 'text-blue-500',
                music: 'sad.mp3', // Placeholder for audio file
                emoji: 'ðŸ˜¢'
            },
            'Mad': {
                tools: ['Count to five', 'Take a deep breath'],
                color: 'text-red-500',
                music: 'mad.mp3', // Placeholder for audio file
                emoji: 'ðŸ˜¡'
            },
            'Scared': {
                tools: ['Focus on one thing', 'Reach out to a friend', 'Go outside'],
                color: 'text-purple-500',
                music: 'scared.mp3', // Placeholder for audio file
                emoji: 'ðŸ˜¨'
            },
            'Happy': {
                tools: ['Play a game', 'Draw or paint'],
                color: 'text-green-500',
                music: 'happy.mp3', // Placeholder for audio file
                emoji: 'ðŸ˜Š'
            }
        };

        const TOOL_DATA = {
            "Reach out to a friend": {
                icon: 'users', 
                color: 'text-indigo-500', 
                image: "images/reach_out_to_friend.png",
                description: "Talking to someone you trust can help you feel connected and less alone."
            },
            "Play a game": {
                icon: 'gamepad', 
                color: 'text-green-500', 
                image: "images/play_a_game.png",
                description: "Diverting your focus to a fun activity can lighten your mood and give you a needed break."
            },
            "Write it down": {
                icon: 'file-text', 
                color: 'text-yellow-500', 
                image: "images/write_it_down.png",
                description: "Writing helps you get the feelings out of your head and see them clearly on the paper."
            },
            "Draw or paint": {
                icon: 'edit', 
                color: 'text-pink-500', 
                image: "images/draw_or_paint.png",
                description: "Expressing feelings through art is a powerful way to process them without words."
            },
            "Focus on one thing": {
                icon: 'target', 
                color: 'text-red-500', 
                image: "images/focus_on_one_thing.png",
                description: "Focusing intensely on a simple object helps anchor your mind when anxiety is overwhelming."
            },
            "Count to five": {
                icon: 'chevrons-down', 
                color: 'text-purple-500', 
                image: "images/count_to_five.png",
                description: "Counting slowly is a simple way to slow your heart rate and bring your body back to calm."
            },
            "Talk to a grown-up": {
                icon: 'message-circle', 
                color: 'text-blue-500', 
                image: "images/talk_to_a_grown_up.png",
                description: "Sharing your feelings with a trusted adult helps you find solutions and feel supported."
            },
            "Take a deep breath": {
                icon: 'wind', 
                color: 'text-cyan-500', 
                image: "images/take_a_deep_breath.png",
                description: "Deep, slow breaths are a powerful tool to physically calm your nervous system."
            },
            "Go outside": {
                icon: 'sun', 
                color: 'text-orange-500', 
                image: "images/go_outside.png",
                description: "Nature is a great healer. Fresh air and a change of scenery can instantly improve your mood."
            }
        };

        // --- GLOBAL STATE & MUSIC ---
        let currentFeeling = null;
        let currentTool = null;
        const mainContent = document.getElementById('main-content');
        
        // Tone.js Setup (A simple synth for positive feedback)
        const synth = new Tone.MembraneSynth().toDestination();

        // --- RENDER FUNCTIONS ---

        // 1. Initial Menu (Gender/Theme selection)
        function renderInitialMenu() {
            mainContent.innerHTML = `
                <h1 class="text-4xl font-extrabold text-indigo-600 mb-6">Brave Feelings Lab</h1>
                <p class="text-gray-600 mb-8">What are you feeling today?</p>
                <div class="space-y-4">
                    ${Object.keys(FEELINGS_DATA).map(feeling => `
                        <button onclick="renderFeelingSelection('${feeling}')"
                                class="w-full py-4 text-xl font-semibold bg-white border-2 border-indigo-500 text-indigo-500 rounded-xl hover:bg-indigo-50 transition duration-300 shadow-md">
                            ${FEELINGS_DATA[feeling].emoji} ${feeling}
                        </button>
                    `).join('')}
                </div>
                <div id="audio-start-prompt" class="mt-8 text-sm text-gray-400">
                    Click an option to begin the interactive experience.
                </div>
            `;
        }

        // 2. Tool Selection Screen
        function renderFeelingSelection(feeling) {
            currentFeeling = feeling;
            const data = FEELINGS_DATA[feeling];
            
            // Start simple feedback music
            synth.triggerAttackRelease("C4", "8n");

            mainContent.innerHTML = `
                <h2 class="text-3xl font-bold ${data.color} mb-6">
                    ${data.emoji} You are feeling ${feeling}!
                </h2>
                <p class="text-gray-700 mb-8">That's okay. Being brave means knowing how to cope.</p>
                
                <p class="text-lg font-semibold text-gray-800 mb-4">Choose a Coping Tool:</p>
                
                <div class="grid grid-cols-2 gap-4">
                    ${data.tools.map(toolName => {
                        const tool = TOOL_DATA[toolName];
                        return `
                            <button onclick="renderToolDetail('${toolName}')"
                                    class="p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-indigo-500 transition duration-300 shadow-lg flex flex-col items-center">
                                <i data-lucide="${tool.icon}" class="w-8 h-8 ${tool.color} mb-2"></i>
                                <span class="text-md font-medium text-gray-700">${toolName}</span>
                            </button>
                        `;
                    }).join('')}
                </div>
                <button onclick="renderInitialMenu()"
                        class="mt-8 text-gray-500 hover:text-gray-700 font-medium transition duration-300 flex items-center mx-auto">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i> Choose a different feeling
                </button>
            `;
            // Re-render Lucide icons after injecting new HTML
            lucide.createIcons(); 
        }

        // 3. Tool Detail Screen
        function renderToolDetail(toolName) {
            currentTool = toolName;
            const tool = TOOL_DATA[toolName];
            
            // Positive chime
            synth.triggerAttackRelease("G4", "8n");

            mainContent.innerHTML = `
                <h2 class="text-3xl font-bold ${tool.color} mb-4">${toolName}</h2>
                <div class="w-full h-auto mb-6 p-4 bg-gray-50 rounded-lg">
                    <img src="${tool.image}" alt="Illustration for ${toolName}" class="w-full max-h-80 object-contain rounded-lg shadow-md mx-auto">
                </div>
                <p class="text-xl font-semibold text-gray-700 mb-8">${tool.description}</p>
                
                <div class="flex space-x-4">
                    <button onclick="renderFeelingSelection('${currentFeeling}')"
                            class="flex-1 py-3 text-lg font-semibold bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition duration-300 shadow-sm">
                        Back to Tools
                    </button>
                    <button onclick="renderInitialMenu()"
                            class="flex-1 py-3 text-lg font-semibold bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition duration-300 shadow-md">
                        Done / Start Over
                    </button>
                </div>
            `;
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderInitialMenu();
        });

    </script>
</body>
</html>
