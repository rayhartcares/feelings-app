<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brave Feelings Lab - ANGRY</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + ReactDOM UMD builds -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel so the browser understands JSX in the script below -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* your animations â€“ unchanged from before */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }

    @keyframes bounce-slow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }

    @keyframes shake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      10% { transform: translate(-1px, -2px) rotate(-1deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      30% { transform: translate(3px, 2px) rotate(0deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      50% { transform: translate(-1px, 2px) rotate(-1deg); }
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      70% { transform: translate(3px, 1px) rotate(-1deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      90% { transform: translate(1px, 2px) rotate(0deg); }
      100% { transform: translate(1px, -2px) rotate(-1deg); }
    }
    .animate-shake { animation: shake 0.5s infinite; }

    @keyframes pulse-fast { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; } }
    .animate-pulse-fast { animation: pulse-fast 0.3s infinite; }

    @keyframes steam {
      0% { opacity: 0; transform: translateY(5px) scale(0.5); }
      50% { opacity: 0.8; transform: translateY(-10px) scale(1); }
      100% { opacity: 0; transform: translateY(-25px) scale(1.5); }
    }
    .animate-steam-left { animation: steam 0.8s infinite linear; }
    .animate-steam-right { animation: steam 0.8s infinite linear reverse; }

    @keyframes throw {
      0% { transform: translate(-100px, 50px) rotate(0deg); opacity: 0; }
      20% { opacity: 1; }
      80% { transform: translate(120px, -50px) rotate(360deg); opacity: 1; }
      100% { transform: translate(140px, -40px) rotate(380deg); opacity: 0; }
    }
    .animate-throw { animation: throw 1.5s infinite linear; }

    @keyframes tantrum {
      0% { transform: rotate(90deg) translateX(0px); }
      25% { transform: rotate(85deg) translateX(-5px); }
      50% { transform: rotate(95deg) translateX(5px); }
      75% { transform: rotate(85deg) translateX(-5px); }
      100% { transform: rotate(90deg) translateX(0px); }
    }
    .animate-tantrum { animation: tantrum 0.3s infinite linear; }

    @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    .animate-ping { animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite; }
  </style>
</head>
<body class="bg-sky-100 min-h-screen flex items-center justify-center font-sans">
  <div id="root"></div>

  <!-- ALL YOUR REACT CODE MUST BE INSIDE THIS ONE SCRIPT TAG -->
  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    /* ===== SoundEngine, FuriousKidSVG, ActionScene, ToolIntro, ToolSequence =====
       Paste ALL that JavaScript here, exactly as you had it.
       (Everything from "const SoundEngine = { ... }" down to the App component.)
    */

    /* --- START of your big JS block (abbreviated here) --- */
    // const SoundEngine = { ... };
    // const FuriousKidSVG = () => { ... };
    // const ActionScene = (...) => { ... };
    // const ToolIntro = (...) => { ... };
    // const ToolSequence = (...) => { ... };

    const App = () => {
      // all your existing state + logic here:
      // currentView, character, activeTab, soundEnabled, musicStyle, etc.

      // negativeReactions and copingTools objects here...

      // ADD THIS NEW HELPER INSIDE App, after copingTools:
      const renderNegativeOutcome = (reactionKey) => {
        const data = negativeReactions[reactionKey];
        if (!data) return null;

        const isSceneType = data.type === "throw" || data.type === "meltdown";

        return (
          <div
            className={`flex flex-col h-full justify-between items-center text-center p-4 rounded-3xl ${data.bgColor}`}
          >
            <h2 className="text-2xl font-bold text-red-700 mb-4">{data.title}</h2>

            <div className="flex-1 flex flex-col justify-center items-center w-full">
              {isSceneType ? (
                <div className="w-full h-64 mb-4">
                  <ActionScene
                    type={data.type}
                    character={character}
                    playSound={() => {}}
                  />
                </div>
              ) : (
                <div className="text-7xl mb-4">{data.emoji}</div>
              )}

              <p className="text-lg text-gray-700 bg-red-50 border border-red-200 rounded-2xl px-4 py-3">
                {data.desc}
              </p>
            </div>

            <button
              onClick={() => setCurrentView("menu")}
              className="mt-4 w-full py-3 bg-white text-red-600 font-bold rounded-xl border-2 border-red-300 hover:bg-red-50"
            >
              Back to choices
            </button>
          </div>
        );
      };

      // ...rest of your App JSX, including:
      // {currentView.startsWith('negative_') && renderNegativeOutcome(...)}
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
